<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Cloud Text-to-Speech API • googleLanguageR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Google Cloud Text-to-Speech API">
<meta property="og:description" content="googleLanguageR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-47480439-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-47480439-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">googleLanguageR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/translation.html">
    <span class="fa fa-globe fa-lg"></span>
     
    Translation API
  </a>
</li>
<li>
  <a href="../articles/nlp.html">
    <span class="fa fa-object-group fa-lg"></span>
     
    NLP API
  </a>
</li>
<li>
  <a href="../articles/speech.html">
    <span class="fa fa-comment fa-lg"></span>
     
    Speech API
  </a>
</li>
<li>
  <a href="../articles/text-to-speech.html">
    <span class="fa fa-phone fa-lg"></span>
     
    Text-to-Speech API
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">
        <span class="fa fa-info"></span>
         
        Function Reference
      </a>
    </li>
    <li>
      <a href="https://cloud.google.com/products/machine-learning/">
        <span class="fa fa-google"></span>
         
        Google Documentation
      </a>
    </li>
    <li>
      <a href="https://github.com/ropensci/googleLanguageR">
        <span class="fa fa-github"></span>
         
        Development site
      </a>
    </li>
    <li>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSerjirmMpB3b7LmBs_Vx_XPIE9IrhpCpPg1jUcpfBcivA3uBw/viewform">
        <span class="fa fa-slack"></span>
         
        Slack Support Channel
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/googleLanguageR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Google Cloud Text-to-Speech API</h1>
                        <h4 class="author">Mark Edmondson</h4>
            
            <h4 class="date">2020-04-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/googleLanguageR/blob/master/vignettes/text-to-speech.Rmd"><code>vignettes/text-to-speech.Rmd</code></a></small>
      <div class="hidden name"><code>text-to-speech.Rmd</code></div>

    </div>

    
    
<p>Google Cloud Text-to-Speech enables developers to synthesize natural-sounding speech with 30 voices, available in multiple languages and variants. It applies DeepMind’s groundbreaking research in WaveNet and Google’s powerful neural networks to deliver the highest fidelity possible. With this easy-to-use API, you can create lifelike interactions with your users, across many applications and devices.</p>
<p>Read more <a href="https://cloud.google.com/text-to-speech/">on the Google Cloud Text-to-Speech Website</a></p>
<p>The Cloud Text-to-Speech API turns text into sound files of the spoken words. Its accessible via the <code>gl_talk</code> function.</p>
<p>Arguments include:</p>
<ul>
<li>
<code>input</code> - The text to turn into speech</li>
<li>
<code>output</code> Where to save the speech audio file</li>
<li>
<code>languageCode</code> The language of the voice as a <a href="https://tools.ietf.org/html/bcp47"><code>BCP-47</code> language tag</a>
</li>
<li>
<code>name</code> Name of the voice, see list via <code><a href="../reference/gl_talk_languages.html">gl_talk_languages()</a></code> or <a href="https://cloud.google.com/text-to-speech/docs/voices">online</a> for supported voices. If not set, then the service will choose a voice based on <code>languageCode</code> and <code>gender</code>.</li>
<li>
<code>gender</code> The gender of the voice, if available</li>
<li>
<code>audioEncoding</code> Format of the requested audio stream - can be a choice of <code>.wav</code>, <code>.mp3</code> or <code>.ogg</code>
</li>
<li>
<code>speakingRate</code> Speaking rate/speed</li>
<li>
<code>pitch</code> Speaking pitch</li>
<li>
<code>volumeGainDb</code> Volumne gain in dB</li>
<li>
<code>sampleRateHertz</code> Sample rate for returned audio</li>
</ul>
<div id="returned-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#returned-structure" class="anchor"></a>Returned structure</h2>
<p>The API returns an audio file which is saved to the location specified in <code>output</code> - by default this is <code>output.wav</code> - if you don’t rename this file it will be overwritten by the next API call.</p>
<p>It is advised to set the appropriate file extension if you change the audio encoding (e.g. to one of <code>.wav</code>, <code>.mp3</code> or <code>.ogg</code>) so audio payers recognise the file format.</p>
</div>
<div id="talk-languages" class="section level2">
<h2 class="hasAnchor">
<a href="#talk-languages" class="anchor"></a>Talk Languages</h2>
<p>The API can talk several different languages, with more being added over time. You can get a current list via the function <code><a href="../reference/gl_talk_languages.html">gl_talk_languages()</a></code> or <a href="https://cloud.google.com/text-to-speech/docs/voices">online</a></p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">gl_talk_languages()
# A tibble: 32 x 4
   languageCodes name             ssmlGender naturalSampleRateHertz
   &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;                       &lt;int&gt;
 1 es-ES         es-ES-Standard-A FEMALE                      24000
 2 ja-JP         ja-JP-Standard-A FEMALE                      22050
 3 pt-BR         pt-BR-Standard-A FEMALE                      24000
 4 tr-TR         tr-TR-Standard-A FEMALE                      22050
 5 sv-SE         sv-SE-Standard-A FEMALE                      22050
 6 nl-NL         nl-NL-Standard-A FEMALE                      24000
 7 en-US         en-US-Wavenet-A  MALE                        24000
 8 en-US         en-US-Wavenet-B  MALE                        24000
 9 en-US         en-US-Wavenet-C  FEMALE                      24000
10 en-US         en-US-Wavenet-D  MALE                        24000</pre></body></html></div>
<p>If you are looking a specific language, specify that in the function call e.g. to see only Spanish (<code>es</code>) voices issue:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">gl_talk_languages(languageCode = "es")
# A tibble: 1 x 4
  languageCodes name             ssmlGender naturalSampleRateHertz
  &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;                       &lt;int&gt;
1 es-ES         es-ES-Standard-A FEMALE                      24000</pre></body></html></div>
<p>You can then specify that voice when calling the API via the <code>name</code> argument, which overrides the <code>gender</code> and <code>languageCode</code> argument:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"Hasta la vista"</span>, <span class="kw">name</span> <span class="kw">=</span> <span class="st">"es-ES-Standard-A"</span>)</pre></body></html></div>
<p>Otherwise, specify your own <code>gender</code> and <code>languageCode</code> and the voice will be picked for you:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"Would you like a cup of tea?"</span>, <span class="kw">gender</span> <span class="kw">=</span> <span class="st">"FEMALE"</span>, <span class="kw">languageCode</span> <span class="kw">=</span> <span class="st">"en-GB"</span>)</pre></body></html></div>
<p>Some languages are not yet supported, such as Danish. The API will return an error in those cases.</p>
</div>
<div id="browser-speech-player" class="section level2">
<h2 class="hasAnchor">
<a href="#browser-speech-player" class="anchor"></a>Browser Speech player</h2>
<p>Creating and clicking on the audio file to play it can be a bit of a drag, so you also have a function that will play the audio file for you, launching via the browser. This can be piped via the tidyverse’s <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code></p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)
<span class="fu"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"This is my audio player"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/gl_talk_player.html">gl_talk_player</a></span>()

<span class="co">## non-piped equivalent</span>
<span class="fu"><a href="../reference/gl_talk_player.html">gl_talk_player</a></span>(<span class="fu"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"This is my audio player"</span>))</pre></body></html></div>
<p>The <code><a href="../reference/gl_talk_player.html">gl_talk_player()</a></code> creates a HTML file called <code>player.html</code> in your working directory by default.</p>
<div id="using-with-shiny" class="section level3">
<h3 class="hasAnchor">
<a href="#using-with-shiny" class="anchor"></a>Using with Shiny</h3>
<p>You can do this in Shiny too, which is demonstrated in the <a href="https://github.com/ropensci/googleLanguageR/tree/master/inst/shiny/capture_speech">example Shiny app</a> included with the package.</p>
<p>Click the link for a video tutorial on how to <a href="https://www.youtube.com/watch?v=Ny0e7vHFu6o&amp;t=8s">integrate text-to-speech into a Shiny app</a> - the demo uses text-to-speech to <a href="https://github.com/MarkEdmondson1234/verbal_ga_shiny">talk through a user’s Google Analytics statistics</a>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Ny0e7vHFu6o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
</iframe>
<p>A shiny module has been created to help integrate text-to-speech into your Shiny apps, demo in the video above and below:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">shiny</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">googleLanguageR</span>)  <span class="co"># assume auto auth setup</span>

<span class="no">ui</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span>(
  <span class="fu"><a href="../reference/gl_talk_shinyUI.html">gl_talk_shinyUI</a></span>(<span class="st">"talk"</span>)
)

<span class="no">server</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">input</span>, <span class="no">output</span>, <span class="no">session</span>){

     <span class="no">transcript</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span>({
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"This is a demo talking Shiny app!"</span>)
     })

     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/callModule.html">callModule</a></span>(<span class="no">gl_talk_shiny</span>, <span class="st">"talk"</span>, <span class="kw">transcript</span> <span class="kw">=</span> <span class="no">transcript</span>)
}


<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span>(<span class="kw">ui</span> <span class="kw">=</span> <span class="no">ui</span>, <span class="kw">server</span> <span class="kw">=</span> <span class="no">server</span>)</pre></body></html></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://code.markedmondson.me">Mark Edmondson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
